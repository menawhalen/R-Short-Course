<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Session 3</title>

<!-- HEAD_CONTENT -->

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div id="section-header">



<h1 class="title toc-ignore">Session 3</h1>

</div>


<div id="section-file-pathways" class="section level2">
<h2>File Pathways</h2>
<p>Computers are not as smart as you think and you have to tell it
exactly what you want it to do and exactly where to look for things.</p>
<p>A file pathway is like a roadmap that guides R to locate your data
files on your computer. It’s similar to giving directions to someone
using street names and landmarks. There are two main types of file
pathways:</p>
<ul>
<li>Absolute Pathway: This is the complete pathway starting from the
root directory of your computer. It’s like giving GPS coordinates for a
location.</li>
</ul>
<p>Example: “C:/Users/YourUsername/Documents/data/file.csv”</p>
<ul>
<li>Relative Pathway: This is the pathway relative to the current
<em>working directory</em> in R. It’s like giving directions based on
your current location.</li>
</ul>
<p>Example: “data/file.csv”</p>
<div id="section-working-directory" class="section level3">
<h3>Working Directory</h3>
<p>The working directory is the location on your computer where R is
currently operating. When you read or write files, R will look for them
in this directory by default. This makes it important to set your
working directory to the right location, especially when working with
data files.</p>
<p>You can use the <code>getwd()</code> function to check your current
working directory, and the <code>setwd()</code> function to set a new
working directory.</p>
<pre><code># Check the current working directory
getwd()

# Set a new working directory
setwd(&quot;path/to/your/new/directory&quot;)</code></pre>
</div>
<div id="section-organizing-data" class="section level3">
<h3>Organizing Data:</h3>
<p>It’s a good practice to organize your data in a separate folder
within your R project. This keeps things tidy and helps avoid
confusion.</p>
<ul>
<li><p>Working in Projects: When you are working in a project the
working directory is set for you where the project is located on your
computer.</p></li>
<li><p>Create a Data Folder: In your R project directory, create a
folder named “data” to store your datasets.</p></li>
<li><p>Place Data Files: Put your dataset files (CSV, Excel, etc.)
inside the “data” folder.</p></li>
</ul>
</div>
</div>
<div id="section-readr" class="section level2">
<h2>readr</h2>
<p>The readr package in the tidyverse provides functions to easily read
data files into R. Let’s see how to use it to import CSV and Excel
files:</p>
<p>Importing CSV Files:</p>
<pre><code># Use read_csv to import a CSV file
file_path &lt;- &quot;data/file.csv&quot;  # Specify the relative pathway
data &lt;- read_csv(file_path)
read_csv(&quot;data/file.csv&quot;)</code></pre>
<p>Importing Excel Files (XLSX):</p>
<pre><code># Use read_xlsx to import an Excel file
file_path &lt;- &quot;data/file.xlsx&quot;  # Specify the relative pathway
data &lt;- read_xlsx(file_path)</code></pre>
<div id="section-checking-imported-data" class="section level3">
<h3>Checking Imported Data:</h3>
<p>After importing the data, it’s a good idea to examine it using
functions like <code>head()</code>, <code>summary()</code>, or
<code>str()</code>.</p>
<pre><code># Display the first few rows
head(data)

# Get summary statistics
summary(data)

# Display the structure of the data
str(data)</code></pre>
</div>
<div id="section-on-your-own.." class="section level3">
<h3>On your own..</h3>
<p>Practice importing datasets by going to <a
href="https://github.com/menawhalen/R-Short-Course/tree/main/data">https://github.com/menawhalen/R-Short-Course/tree/main/data</a>
and download both dataset we have been using <code>CIACountries</code>
and <code>flights</code>.</p>
<ul>
<li>save the files in your data folder</li>
<li>open a new R script</li>
<li>import the datasets using <code>read_csv()</code></li>
<li>check that you imported the datasets properly</li>
</ul>
</div>
</div>
<div id="section-joins" class="section level2">
<h2>Joins</h2>
<p>In the tidyverse, joining two datasets together is a way to combine
data from different sources based on common variables. This is similar
to joining tables in a relational database or using VLOOKUP in
spreadsheet software. The dplyr package within the tidyverse provides
functions to perform these joins.</p>
<div id="section-inner-join" class="section level3">
<h3>Inner Join</h3>
<p>An inner join combines rows from two datasets where there’s a match
between the specified variables. Rows with no matching values are
excluded. Inner joins return results if the keys are matched in BOTH
tables.</p>
<pre><code>inner_joined_data &lt;- dataset1 %&gt;%
  inner_join(dataset2, by = &quot;common_column&quot;)
  </code></pre>
</div>
<div id="section-practice-with-flights-data" class="section level3">
<h3>Practice with Flights Data</h3>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["carrier"],"name":[1],"type":["chr"],"align":["left"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"9E","2":"Endeavor Air Inc."},{"1":"AA","2":"American Airlines Inc."},{"1":"AS","2":"Alaska Airlines Inc."},{"1":"B6","2":"JetBlue Airways"},{"1":"DL","2":"Delta Air Lines Inc."},{"1":"EV","2":"ExpressJet Airlines Inc."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["year"],"name":[1],"type":["int"],"align":["right"]},{"label":["month"],"name":[2],"type":["int"],"align":["right"]},{"label":["day"],"name":[3],"type":["int"],"align":["right"]},{"label":["dep_time"],"name":[4],"type":["int"],"align":["right"]},{"label":["sched_dep_time"],"name":[5],"type":["int"],"align":["right"]},{"label":["dep_delay"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["arr_time"],"name":[7],"type":["int"],"align":["right"]},{"label":["sched_arr_time"],"name":[8],"type":["int"],"align":["right"]},{"label":["arr_delay"],"name":[9],"type":["dbl"],"align":["right"]},{"label":["carrier"],"name":[10],"type":["chr"],"align":["left"]},{"label":["flight"],"name":[11],"type":["int"],"align":["right"]},{"label":["tailnum"],"name":[12],"type":["chr"],"align":["left"]},{"label":["origin"],"name":[13],"type":["chr"],"align":["left"]},{"label":["dest"],"name":[14],"type":["chr"],"align":["left"]},{"label":["air_time"],"name":[15],"type":["dbl"],"align":["right"]},{"label":["distance"],"name":[16],"type":["dbl"],"align":["right"]},{"label":["hour"],"name":[17],"type":["dbl"],"align":["right"]},{"label":["minute"],"name":[18],"type":["dbl"],"align":["right"]},{"label":["time_hour"],"name":[19],"type":["dttm"],"align":["right"]}],"data":[{"1":"2013","2":"1","3":"1","4":"517","5":"515","6":"2","7":"830","8":"819","9":"11","10":"UA","11":"1545","12":"N14228","13":"EWR","14":"IAH","15":"227","16":"1400","17":"5","18":"15","19":"2013-01-01 05:00:00"},{"1":"2013","2":"1","3":"1","4":"533","5":"529","6":"4","7":"850","8":"830","9":"20","10":"UA","11":"1714","12":"N24211","13":"LGA","14":"IAH","15":"227","16":"1416","17":"5","18":"29","19":"2013-01-01 05:00:00"},{"1":"2013","2":"1","3":"1","4":"542","5":"540","6":"2","7":"923","8":"850","9":"33","10":"AA","11":"1141","12":"N619AA","13":"JFK","14":"MIA","15":"160","16":"1089","17":"5","18":"40","19":"2013-01-01 05:00:00"},{"1":"2013","2":"1","3":"1","4":"544","5":"545","6":"-1","7":"1004","8":"1022","9":"-18","10":"B6","11":"725","12":"N804JB","13":"JFK","14":"BQN","15":"183","16":"1576","17":"5","18":"45","19":"2013-01-01 05:00:00"},{"1":"2013","2":"1","3":"1","4":"554","5":"600","6":"-6","7":"812","8":"837","9":"-25","10":"DL","11":"461","12":"N668DN","13":"LGA","14":"ATL","15":"116","16":"762","17":"6","18":"0","19":"2013-01-01 06:00:00"},{"1":"2013","2":"1","3":"1","4":"554","5":"558","6":"-4","7":"740","8":"728","9":"12","10":"UA","11":"1696","12":"N39463","13":"EWR","14":"ORD","15":"150","16":"719","17":"5","18":"58","19":"2013-01-01 05:00:00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>#Tidyverse way
flights_joined &lt;- flights %&gt;% 
  inner_join(airlines, by = c(&quot;carrier&quot; = &quot;carrier&quot;))
glimpse(flights_joined)</code></pre>
<pre><code>## Rows: 336,776
## Columns: 20
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …
## $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …
## $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…
## $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…
## $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…
## $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…
## $ carrier        &lt;chr&gt; &quot;UA&quot;, &quot;UA&quot;, &quot;AA&quot;, &quot;B6&quot;, &quot;DL&quot;, &quot;UA&quot;, &quot;B6&quot;, &quot;EV&quot;, &quot;B6&quot;, &quot;…
## $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…
## $ tailnum        &lt;chr&gt; &quot;N14228&quot;, &quot;N24211&quot;, &quot;N619AA&quot;, &quot;N804JB&quot;, &quot;N668DN&quot;, &quot;N394…
## $ origin         &lt;chr&gt; &quot;EWR&quot;, &quot;LGA&quot;, &quot;JFK&quot;, &quot;JFK&quot;, &quot;LGA&quot;, &quot;EWR&quot;, &quot;EWR&quot;, &quot;LGA&quot;,…
## $ dest           &lt;chr&gt; &quot;IAH&quot;, &quot;IAH&quot;, &quot;MIA&quot;, &quot;BQN&quot;, &quot;ATL&quot;, &quot;ORD&quot;, &quot;FLL&quot;, &quot;IAD&quot;,…
## $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…
## $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …
## $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…
## $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…
## $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…
## $ name           &lt;chr&gt; &quot;United Air Lines Inc.&quot;, &quot;United Air Lines Inc.&quot;, &quot;Amer…</code></pre>
<pre class="r"><code>flights_joined %&gt;% 
  select(carrier, name, flight, origin, dest) %&gt;% 
  head(3)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["carrier"],"name":[1],"type":["chr"],"align":["left"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["flight"],"name":[3],"type":["int"],"align":["right"]},{"label":["origin"],"name":[4],"type":["chr"],"align":["left"]},{"label":["dest"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"UA","2":"United Air Lines Inc.","3":"1545","4":"EWR","5":"IAH"},{"1":"UA","2":"United Air Lines Inc.","3":"1714","4":"LGA","5":"IAH"},{"1":"AA","2":"American Airlines Inc.","3":"1141","4":"JFK","5":"MIA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>“In an inner_join(), the result set contains only those rows that
have matches in both tables. In this case, all of the rows in flights
have exactly one corresponding entry in airlines, so the number of rows
in flights_joined is the same as the number of rows in flights (this
will not always be the case).”</p>
<p><strong><em>It is always a good idea to carefully check that the
number of rows returned by a join operation is what you expected. In
particular, you should carefully check for rows in one table that
matched to more than one row in the other table</em></strong></p>
</div>
<div id="section-left-join" class="section level3">
<h3>Left Join</h3>
<p>A left join includes all rows from the left dataset and the matching
rows from the right dataset. If there’s no match, the columns from the
right dataset will be filled with NA. Here the rows of the first table
are always returned, regardless of whether there is a match in the
second table.</p>
<pre><code>left_joined_data &lt;- dataset1 %&gt;%
  left_join(dataset2, by = &quot;common_column&quot;)</code></pre>
</div>
<div id="section-practice-with-flights-data-1" class="section level3">
<h3>Practice with Flights Data</h3>
<pre class="r"><code>#Airports in the pacific time zone only 
airports_pt &lt;- airports %&gt;%
  filter(tz == -8) %&gt;% 
  select(faa, name, tz)

nrow(airports_pt)</code></pre>
<pre><code>## [1] 178</code></pre>
<pre class="r"><code>head(airports_pt)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["faa"],"name":[1],"type":["chr"],"align":["left"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["tz"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"0S9","2":"Jefferson County Intl","3":"-8"},{"1":"1C9","2":"Frazier Lake Airpark","3":"-8"},{"1":"1RL","2":"Point Roberts Airpark","3":"-8"},{"1":"38W","2":"Lynden Airport","3":"-8"},{"1":"49X","2":"Chemehuevi Valley","3":"-8"},{"1":"55S","2":"Packwood","3":"-8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>#If we do inner join
nyc_dests_pt &lt;- flights %&gt;% 
  inner_join(airports_pt, by = c(&quot;dest&quot; = &quot;faa&quot;)) %&gt;% 
  select(name, tz, dest, dep_time,sched_dep_time, arr_time, sched_arr_time, carrier)

head(nyc_dests_pt)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["name"],"name":[1],"type":["chr"],"align":["left"]},{"label":["tz"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["dest"],"name":[3],"type":["chr"],"align":["left"]},{"label":["dep_time"],"name":[4],"type":["int"],"align":["right"]},{"label":["sched_dep_time"],"name":[5],"type":["int"],"align":["right"]},{"label":["arr_time"],"name":[6],"type":["int"],"align":["right"]},{"label":["sched_arr_time"],"name":[7],"type":["int"],"align":["right"]},{"label":["carrier"],"name":[8],"type":["chr"],"align":["left"]}],"data":[{"1":"Los Angeles Intl","2":"-8","3":"LAX","4":"558","5":"600","6":"924","7":"917","8":"UA"},{"1":"San Francisco Intl","2":"-8","3":"SFO","4":"558","5":"600","6":"923","7":"937","8":"UA"},{"1":"Mc Carran Intl","2":"-8","3":"LAS","4":"559","5":"600","6":"854","7":"902","8":"UA"},{"1":"San Francisco Intl","2":"-8","3":"SFO","4":"611","5":"600","6":"945","7":"931","8":"UA"},{"1":"Los Angeles Intl","2":"-8","3":"LAX","4":"628","5":"630","6":"1016","7":"947","8":"UA"},{"1":"John Wayne Arpt Orange Co","2":"-8","3":"SNA","4":"646","5":"645","6":"1023","7":"1030","8":"UA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>#Notice these are different.  
#key variable needs to be in BOTH data sets to get returned.  
nrow(flights)</code></pre>
<pre><code>## [1] 336776</code></pre>
<pre class="r"><code>nrow(nyc_dests_pt)</code></pre>
<pre><code>## [1] 46324</code></pre>
<pre class="r"><code>nyc_dests &lt;- flights %&gt;% 
  left_join(airports_pt, by = c(&quot;dest&quot; = &quot;faa&quot;))
 
#Notice these are the same!
nrow(flights)</code></pre>
<pre><code>## [1] 336776</code></pre>
<pre class="r"><code>nrow(nyc_dests)</code></pre>
<pre><code>## [1] 336776</code></pre>
<pre class="r"><code>nyc_dests %&gt;%
  summarize(
    num_flights = n(),
    num_flights_pt = sum(!is.na(name)),
    num_flights_not_pt = sum(is.na(name))
  )</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["num_flights"],"name":[1],"type":["int"],"align":["right"]},{"label":["num_flights_pt"],"name":[2],"type":["int"],"align":["right"]},{"label":["num_flights_not_pt"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"336776","2":"46324","3":"290452"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-full-join" class="section level3">
<h3>Full Join</h3>
<p>A full join includes all rows from both datasets. Columns from the
dataset with missing values will be filled with NA where there’s no
match.</p>
<pre><code>full_joined_data &lt;- dataset1 %&gt;%
  full_join(dataset2, by = &quot;common_column&quot;)
  </code></pre>
<p>There is also a right join but this is much less common. A right join
is the opposite of a left join. It includes all rows from the right
dataset and the matching rows from the left dataset.</p>
</div>
<div id="section-practice-with-flights-data-2" class="section level3">
<h3>Practice with Flights Data</h3>
<pre class="r"><code># Right Join: Keeping all airports in the pacific time zone, matching if possible
nyc_dests_right &lt;- flights %&gt;% 
  right_join(airports_pt, by = c(&quot;dest&quot; = &quot;faa&quot;))

# Full Join: Keeping all destinations and airports, filling with NA where no match
nyc_dests_full &lt;- flights %&gt;% 
  full_join(airports_pt, by = c(&quot;dest&quot; = &quot;faa&quot;))

# Summary of the results
summary_inner &lt;- nyc_dests_pt %&gt;%
  summarize(num_flights = n())

summary_left &lt;- nyc_dests %&gt;%
  summarize(
    num_flights = n(),
    num_flights_pt = sum(!is.na(name)),
    num_flights_not_pt = sum(is.na(name))
  )

summary_right &lt;- nyc_dests_right %&gt;%
  summarize(num_airports = n())

summary_full &lt;- nyc_dests_full %&gt;%
  summarize(num_rows = n(), num_airports = sum(!is.na(name)))

# Display the summaries
summary_inner</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["num_flights"],"name":[1],"type":["int"],"align":["right"]}],"data":[{"1":"46324"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>summary_left</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["num_flights"],"name":[1],"type":["int"],"align":["right"]},{"label":["num_flights_pt"],"name":[2],"type":["int"],"align":["right"]},{"label":["num_flights_not_pt"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"336776","2":"46324","3":"290452"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>summary_right</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["num_airports"],"name":[1],"type":["int"],"align":["right"]}],"data":[{"1":"46489"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>summary_full</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["num_rows"],"name":[1],"type":["int"],"align":["right"]},{"label":["num_airports"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"336941","2":"46489"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-join-by-multiple-columns" class="section level3">
<h3>Join by multiple columns</h3>
<p>The <code>by</code> argument specifies the column(s) that should be
used for matching. These join functions work well when the datasets have
a shared column containing the same type of data (e.g., IDs or
keys).</p>
<p>You can use multiple column names to define the matching
conditions.</p>
<pre><code># Syntax
inner_join(df1, df2, by=c(&#39;x1&#39;=&#39;y1&#39;, &#39;x2&#39;=&#39;y2&#39;))</code></pre>
<p>Example Code</p>
<pre class="r"><code># Create emp Data Frame
emp_df=data.frame(
  emp_id=c(1,2,3,4,5,6),
  name=c(&quot;Smith&quot;,&quot;Rose&quot;,&quot;Williams&quot;,&quot;Jones&quot;,&quot;Brown&quot;,&quot;Brown&quot;),
  superior_emp_id=c(-1,1,1,2,2,2),
  dept_id=c(10,20,10,10,40,50),
  dept_branch_id= c(101,102,101,101,104,105)
)

# Create dept Data Frame
dept_df=data.frame(
  dept_id=c(10,20,30,40),
  dept_name=c(&quot;Finance&quot;,&quot;Marketing&quot;,&quot;Sales&quot;,&quot;IT&quot;),
  dept_branch_id= c(101,102,103,104)
)

emp_df %&gt;% 
  inner_join(dept_df, 
        by=c(&#39;dept_id&#39;=&#39;dept_id&#39;, 
             &#39;dept_branch_id&#39;=&#39;dept_branch_id&#39;))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["emp_id"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["name"],"name":[2],"type":["chr"],"align":["left"]},{"label":["superior_emp_id"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["dept_id"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["dept_branch_id"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["dept_name"],"name":[6],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"Smith","3":"-1","4":"10","5":"101","6":"Finance"},{"1":"2","2":"Rose","3":"1","4":"20","5":"102","6":"Marketing"},{"1":"3","2":"Williams","3":"1","4":"10","5":"101","6":"Finance"},{"1":"4","2":"Jones","3":"2","4":"10","5":"101","6":"Finance"},{"1":"5","2":"Brown","3":"2","4":"40","5":"104","6":"IT"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div id="section-on-your-own..-1" class="section level2">
<h2>On your own..</h2>
<p>Answer the following questions either in the exercise below or in
your R script</p>
<ol style="list-style-type: decimal">
<li>Which airlines had the most delayed flights departing from NYC in
2013?</li>
<li>What are the top destinations (airports) for flights departing from
NYC in 2013?</li>
<li>Which airlines had the highest average departure delays from each
airport?</li>
<li>What is the distribution of flight distances for flights departing
from each airport?</li>
<li>Which airlines operated the most flights from each airport in
NYC?</li>
</ol>
<div class="tutorial-exercise" data-label="join_ex" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>## Q1
flights %&gt;% 
  left_join()
## Q2</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>


<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-join_ex-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-join_ex-code-editor`)), session)
output$`tutorial-exercise-join_ex-output` <- renderUI({
  `tutorial-exercise-join_ex-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "join_ex", global_setup = structure("library(learnr)", chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "join_ex", code = "## Q1\nflights %>% \n  left_join()\n## Q2\n", 
        opts = list(label = "\"join_ex\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "Session-3_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "Session-3_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 7, fig.height = 5, fig.env = "figure", fig.cap = NULL, 
        fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 672, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        label = "join_ex", exercise = TRUE, code = c("## Q1", 
        "flights %>% ", "  left_join()", "## Q2", ""), out.width.px = 672, 
        out.height.px = 480, params.src = "join_ex, exercise = TRUE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.23"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["5.5.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.11.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.4"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]}},"value":[{"type":"character","attributes":{},"value":["base","base64enc","bslib","cachem","cli","colorspace","compiler","datasets","digest","dplyr","ellipsis","evaluate","fansi","fastmap","fontawesome","forcats","generics","ggplot2","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","learnr","lifecycle","lubridate","magrittr","mdsr","methods","mime","munsell","nycflights13","pillar","pkgconfig","promises","purrr","R6","Rcpp","readr","repr","rlang","rmarkdown","rprojroot","rstudioapi","sass","scales","shiny","skimr","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.2.3","0.1-3","0.5.0","1.0.8","3.6.0","2.1-0","4.2.3","4.2.3","0.6.31","1.1.2","0.3.2","0.21","1.0.4","1.1.1","0.5.1","1.0.0","0.1.3","3.4.2","1.6.2","4.2.3","4.2.3","4.2.3","0.3.3","1.1.3","0.5.5","1.6.2","1.6.11","0.1.4","1.8.7","1.43","1.3.1","0.11.4","1.0.3","1.9.2","2.0.3","0.2.7","4.2.3","0.12","0.5.0","1.0.2","1.9.0","2.0.3","1.2.0.1","1.0.1","2.5.1","1.0.10","2.1.4","1.1.6","1.1.1","2.23","2.0.3","0.15.0","0.4.7","1.2.1","1.7.4.1","2.1.5","4.2.3","1.7.12","1.5.0","3.2.1","1.3.0","1.2.0","2.0.0","0.2.0","4.2.3","0.4.0","1.2.3","4.2.3","0.6.2","2.5.0","0.39","1.8-4","2.3.7"]}]}]}
</script>
<!--/html_preserve-->
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
