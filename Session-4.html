<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Session 4</title>

<!-- HEAD_CONTENT -->

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div id="section-header">



<h1 class="title toc-ignore">Session 4</h1>

</div>


<div id="section-ggplot" class="section level3">
<h3>ggplot</h3>
<p>The key to using ggplot to is to think of ever command as a
layer!</p>
<pre class="r"><code>library(tidyverse)
library(mdsr)
ggplot(aes(x = gdp, y = educ),data = CIACountries) + geom_point()</code></pre>
<p><img src="Session-4_files/figure-html/start-1.png" width="672" /></p>
<pre class="r"><code>#CIACountries %&gt;% ggplot(aes(x = gdp, y = educ)) + geom_point()</code></pre>
<p>Add axis labels</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point() + 
  xlab(&quot;GDP (Millions of $)&quot;) + 
  ylab(&quot;Education&quot;)</code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Change the shape</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point(shape = 23) +
  xlab(&quot;GDP&quot;) +
  ylab(&quot;Education&quot;)</code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Change the color</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point(shape = 23, colour = &quot;red&quot;) +
  xlab(&quot;GDP&quot;) +
  ylab(&quot;Education&quot;) </code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Change the x and y limits</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point(shape = 23, colour = &quot;red&quot;) +
  xlab(&quot;GDP&quot;) +
  ylab(&quot;Education&quot;) + 
  xlim(0,200000) + 
  ylim(0,15)</code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Aspect Ratio</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point(shape = 23, colour = &quot;red&quot;) +
  xlab(&quot;GDP&quot;) +
  ylab(&quot;Education&quot;) + 
  xlim(0,200000) + 
  ylim(0,15) + 
  coord_fixed(ratio=10000)</code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Change axis values</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point(shape = 23, colour = &quot;red&quot;) +
  xlab(&quot;GDP&quot;) +
  ylab(&quot;Education&quot;) + 
  xlim(0,200000) + 
  ylim(0,15) + 
  coord_fixed(ratio=10000) + 
  scale_x_continuous(breaks = c(0,100000,200000),
                     labels = c(&quot;None&quot;,&quot;A little&quot;,&quot;A lot&quot;), 
                     limits = c(0,200000)) + 
  scale_y_continuous(breaks = c(0,5,10,15),
                     labels = c(&quot;None&quot;,&quot;Ok&quot;,&quot;Good&quot;,&quot;Great&quot;),
                     limits = c(0,15)
                     )</code></pre>
<pre><code>## Scale for x is already present.
## Adding another scale for x, which will replace the existing scale.
## Scale for y is already present.
## Adding another scale for y, which will replace the existing scale.</code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>#Note: scale_x_continuous overrules the xlim!</code></pre>
<p>Size</p>
<pre class="r"><code>ggplot(aes(x = gdp, y = educ), data = CIACountries) +
  geom_point(shape = 23, colour = &quot;red&quot;, size = 0.5) +
  xlab(&quot;GDP&quot;) +
  ylab(&quot;Education&quot;) + 
  xlim(0,200000) + 
  ylim(0,15) + 
  coord_fixed(ratio=10000) + 
  scale_x_continuous(breaks = c(0,100000,200000),
                     labels = c(&quot;None&quot;,&quot;A little&quot;,&quot;A lot&quot;), 
                     limits = c(0,200000)) + 
  scale_y_continuous(breaks = c(0,5,10,15),
                     labels = c(&quot;None&quot;,&quot;Ok&quot;,&quot;Good&quot;,&quot;Great&quot;),
                     limits = c(0,15)
                     )</code></pre>
<pre><code>## Scale for x is already present.
## Adding another scale for x, which will replace the existing scale.
## Scale for y is already present.
## Adding another scale for y, which will replace the existing scale.</code></pre>
<pre><code>## Warning: Removed 64 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
<div id="section-univariate-displays" class="section level1">
<h1>Univariate displays</h1>
<div id="section-histograms" class="section level3">
<h3>Histograms</h3>
<pre class="r"><code>library(mdsr)
data(&quot;SAT_2010&quot;)</code></pre>
<pre class="r"><code>#Base R
hist(SAT_2010$math)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>#ggplot
ggplot(aes(x = math), data = SAT_2010) + geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
<pre class="r"><code>#gggplot with breaks
ggplot(aes(x = math), data = SAT_2010) + geom_histogram(breaks = c(400,450,550,600,700))</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-9-3.png" width="672" /></p>
<pre class="r"><code>#Base R
dens &lt;- density(SAT_2010$math)
plot(dens$x, dens$y, type = &quot;l&quot;)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>#ggplot
#This is a lot cleaner code and nicer looking!
ggplot(aes(x = math), data = SAT_2010) + geom_density()</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<pre class="r"><code>#More jagged
ggplot(aes(x = math), data = SAT_2010) + geom_density(bw = 10)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-10-3.png" width="672" /></p>
<pre class="r"><code>#A histogram and a density plot on the same plot!!!
ggplot(aes(x = math), data = SAT_2010) + geom_histogram(aes(y = after_stat(density))) + geom_density(colour = &quot;red&quot;) </code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-10-4.png" width="672" /></p>
<pre class="r"><code>ggplot(aes(x = math), data = SAT_2010) + geom_density(colour = &quot;red&quot;)  + geom_histogram(aes(y = after_stat(density))) </code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-10-5.png" width="672" /></p>
<pre class="r"><code>sub &lt;- head(SAT_2010, 10)
sub &lt;- sub[order(sub$math),]
barplot(sub$math, names.arg = sub$state)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre class="r"><code>#ggplot
ggplot(
  data = head(SAT_2010, 10), 
  aes(x = reorder(state, math), y = math)
) +
  geom_col() +
  labs(x = &quot;State&quot;, y = &quot;Average math SAT score&quot;)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-11-2.png" width="672" />
### Stacked bar chart</p>
<pre class="r"><code>library(mosaicData)
ggplot(data = mosaicData::HELPrct, aes(x = homeless)) + 
  geom_bar(aes(fill = substance), position = &quot;fill&quot;) </code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mosaicData::HELPrct, aes(x = homeless)) + 
  geom_bar(aes(fill = substance), position = &quot;fill&quot;) +
  scale_fill_brewer(palette = &quot;Spectral&quot;) </code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-12-2.png" width="672" /></p>
<pre class="r"><code>ggplot(data = mosaicData::HELPrct, aes(x = homeless)) + 
  geom_bar(aes(fill = substance), position = &quot;fill&quot;) +
  scale_fill_brewer(palette = &quot;Spectral&quot;) + 
  coord_flip()</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-12-3.png" width="672" /></p>
</div>
<div id="section-multivariate-displays" class="section level3">
<h3>Multivariate displays</h3>
<pre class="r"><code>g &lt;- ggplot(
  data = SAT_2010, 
  aes(x = expenditure, y = math)
) + 
  geom_point()</code></pre>
<p>We can easily add a trend line with ggplot.</p>
<pre class="r"><code>g + 
  geom_smooth(method = &quot;loess&quot;, se = FALSE) + 
  xlab(&quot;Average expenditure per student ($1000)&quot;) +
  ylab(&quot;Average score on math SAT&quot;)</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>To do this in base R you have to do this:</p>
<pre class="r"><code>plot(SAT_2010$expenditure, SAT_2010$math)
a &lt;- loess(SAT_2010$math ~ SAT_2010$expenditure)
points(a$x[order(a$x)], a$fitted[order(a$x)], type = &quot;l&quot;, col = &quot;red&quot;)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>SAT_2010 &lt;- SAT_2010 %&gt;%
  mutate(
    SAT_rate = cut(
      sat_pct, 
      breaks = c(0, 30, 60, 100), 
      labels = c(&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;)
    )
  )
#g &lt;- g %+% SAT_2010
#g + aes(color = SAT_rate)
#To this in base R is possible, but it is a pain!


#Full code: 
ggplot(data = SAT_2010, aes(x = expenditure, y = math,color = SAT_rate)) + 
  geom_point() + geom_smooth(aes(color = SAT_rate), method = &quot;lm&quot;, se = FALSE) + scale_colour_brewer(palette = &quot;Spectral&quot;) </code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="section-faceting" class="section level3">
<h3>Faceting</h3>
<pre class="r"><code>#Base R
par(mfrow = c(1, 3))

plot(SAT_2010$expenditure[SAT_2010$SAT_rate == &quot;low&quot;],
     SAT_2010$math[SAT_2010$SAT_rate == &quot;low&quot;],
     xlab = &quot;expenditure&quot;,
     ylab = &quot;math score&quot;)

plot(SAT_2010$expenditure[SAT_2010$SAT_rate == &quot;medium&quot;],
     SAT_2010$math[SAT_2010$SAT_rate == &quot;medium&quot;],
     xlab = &quot;expenditure&quot;,
     ylab = &quot;math score&quot;)

plot(SAT_2010$expenditure[SAT_2010$SAT_rate == &quot;high&quot;],
     SAT_2010$math[SAT_2010$SAT_rate == &quot;high&quot;],
     xlab = &quot;expenditure&quot;,
     ylab = &quot;math score&quot;)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>So much easier in ggplot!</p>
<pre class="r"><code>#g + facet_wrap( ~SAT_rate )
#g + facet_grid(~ SAT_rate )</code></pre>
<pre class="r"><code>#full code
SAT_2010 &lt;- SAT_2010 %&gt;%
  mutate(SAT_rate = cut(
    sat_pct,
    breaks = c(0, 30, 60, 100),
    labels = c(&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;)
  ))
g &lt;- ggplot(data = SAT_2010,
            aes(x = expenditure, y = math)) +
  geom_point() + geom_smooth(method = &quot;lm&quot;) + facet_wrap( ~ SAT_rate)
g</code></pre>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>NHANES example</p>
<pre class="r"><code>library(NHANES)
ggplot(
  data = slice_sample(NHANES, n = 1000), 
  aes(x = Age, y = Height, color = Gender)
) + 
  geom_point() + 
  geom_smooth() + 
  xlab(&quot;Age (years)&quot;) + 
  ylab(&quot;Height (cm)&quot;) +
  labs(color = &quot;Gender&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 39 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 39 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<pre class="r"><code>#relevel the reference category
library(NHANES)
ggplot(
  data = slice_sample(NHANES, n = 1000), 
  aes(x = Age, y = Height, color = fct_relevel(Gender, &quot;male&quot;))
) + 
  geom_point() + 
  geom_smooth() + 
  xlab(&quot;Age (years)&quot;) + 
  ylab(&quot;Height (cm)&quot;) +
  labs(color = &quot;Gender&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 48 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 48 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<pre class="r"><code>library(macleish)</code></pre>
<pre><code>## Loading required package: etl</code></pre>
<pre class="r"><code>ggplot(data = whately_2015, aes(x = when, y = temperature)) + 
  geom_line(color = &quot;darkgreen&quot;) + 
  geom_smooth(color = &quot;pink&quot;) + 
  xlab(NULL) + 
  ylab(&quot;Temperature (degrees Celsius)&quot;)</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code># whately_2015 %&gt;%
#   mutate(month = as.factor(lubridate::month(when, label = TRUE))) %&gt;%
#   group_by(month) %&gt;% 
#   skim(temperature) %&gt;%
#   select(-na)

whately_2015$month &lt;-
  as.factor(lubridate::month(whately_2015$when, label = TRUE))


#Base R
boxplot(
  whately_2015$temperature ~ whately_2015$month,
  xlab = &quot;Month&quot;,
  ylab = expression(&quot;Temperature (&quot; *  ~ degree * C * &quot;)&quot;)
)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<pre class="r"><code>#ggplot
ggplot(
  data = whately_2015, 
  aes(
    x = lubridate::month(when, label = TRUE), 
    y = temperature
  )
) + 
  geom_boxplot() +
  xlab(&quot;Month&quot;) + 
  ylab(expression(&quot;Temperature (&quot;*~degree*C*&quot;)&quot;))</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-23-2.png" width="672" /></p>
<p>Check out the extended example here: <a
href="https://mdsr-book.github.io/mdsr2e/ch-vizII.html#sec:babynames"
class="uri">https://mdsr-book.github.io/mdsr2e/ch-vizII.html#sec:babynames</a></p>
<pre class="r"><code>SAT_2010 &lt;- SAT_2010 %&gt;%
  mutate(
    SAT_rate = cut(
      sat_pct, 
      breaks = c(0, 30, 60, 100), 
      labels = c(&quot;low&quot;, &quot;medium&quot;, &quot;high&quot;)
    )
  )

median(SAT_2010$pupil_teacher_ratio)</code></pre>
<pre><code>## [1] 15</code></pre>
<pre class="r"><code>median(SAT_2010$salary)</code></pre>
<pre><code>## [1] 52062.5</code></pre>
<pre class="r"><code>SAT_2010 &lt;- SAT_2010 %&gt;% mutate(ptr = ifelse(pupil_teacher_ratio &gt; median(SAT_2010$pupil_teacher_ratio), &quot;high&quot;,&quot;low&quot;),
      sal = ifelse(salary &gt; median(SAT_2010$salary), &quot;high&quot;,&quot;low&quot;))

ggplot(aes(x = math, y = read, color = SAT_rate), data = SAT_2010) + geom_point() + facet_grid(sal ~ ptr)</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
</div>
<div id="section-in-class-exercise" class="section level1">
<h1>In class exercise</h1>
<p>Make these plots!</p>
<p><img src="Session-4_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_density()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_boxplot()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-2.png" width="672" /></p>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_bin()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-3.png" width="672" /></p>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_bin()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-4.png" width="672" /></p>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_boxplot()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-5.png" width="672" /></p>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_density()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-6.png" width="672" /><img src="Session-4_files/figure-html/unnamed-chunk-26-7.png" width="672" /></p>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_density()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-8.png" width="672" /><img src="Session-4_files/figure-html/unnamed-chunk-26-9.png" width="672" /><img src="Session-4_files/figure-html/unnamed-chunk-26-10.png" width="672" /></p>
<pre><code>## Warning: Removed 56 rows containing non-finite values (`stat_boxplot()`).</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-26-11.png" width="672" /></p>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<pre class="r"><code>library(Lahman)
Teams %&gt;% filter(teamID == &quot;CHN&quot;) %&gt;% count(HR &gt;= 200)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["HR >= 200"],"name":[1],"type":["lgl"],"align":["right"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"FALSE","2":"140"},{"1":"TRUE","2":"7"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>Teams %&gt;% filter(teamID == &quot;CHN&quot; &amp; HR &gt;= 200) %&gt;% summarise(median(W))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["median(W)"],"name":[1],"type":["int"],"align":["right"]}],"data":[{"1":"84"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>ggplot(aes(x = yearID, y = HR), data = Teams) + geom_line() + facet_wrap( ~ lgID) + geom_smooth()</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Computation failed in `stat_smooth()`
## Computation failed in `stat_smooth()`
## Caused by error in `smooth.construct.cr.smooth.spec()`:
## ! x has insufficient unique values to support 10 knots: reduce k.</code></pre>
<p><img src="Session-4_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>


<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.23"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.23"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["5.5.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.11.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.4"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94]}},"value":[{"type":"character","attributes":{},"value":["base","base64enc","bslib","cachem","class","classInt","cli","colorspace","compiler","datasets","DBI","digest","dplyr","e1071","ellipsis","etl","evaluate","fansi","farver","fastmap","fontawesome","forcats","generics","ggplot2","glue","graphics","grDevices","grid","gtable","highr","hms","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","KernSmooth","knitr","labeling","Lahman","later","lattice","learnr","lifecycle","lubridate","macleish","magrittr","Matrix","mdsr","methods","mgcv","mime","mosaicData","munsell","NHANES","nlme","pillar","pkgconfig","promises","proxy","purrr","R6","RColorBrewer","Rcpp","readr","repr","rlang","rmarkdown","rprojroot","rstudioapi","sass","scales","sf","shiny","skimr","splines","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","units","utf8","utils","vctrs","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.2.3","0.1-3","0.5.0","1.0.8","7.3-21","0.4-9","3.6.0","2.1-0","4.2.3","4.2.3","1.1.3","0.6.31","1.1.2","1.7-13","0.3.2","0.4.0","0.21","1.0.4","2.1.1","1.1.1","0.5.1","1.0.0","0.1.3","3.4.2","1.6.2","4.2.3","4.2.3","4.2.3","0.3.3","0.10","1.1.3","0.5.5","1.6.2","1.6.11","0.1.4","1.8.7","2.23-20","1.43","0.4.2","11.0-0","1.3.1","0.20-45","0.11.4","1.0.3","1.9.2","0.3.9","2.0.3","1.6-0","0.2.7","4.2.3","1.8-42","0.12","0.20.3","0.5.0","2.1.0","3.1-162","1.9.0","2.0.3","1.2.0.1","0.4-27","1.0.1","2.5.1","1.1-3","1.0.10","2.1.4","1.1.6","1.1.1","2.23","2.0.3","0.15.0","0.4.7","1.2.1","1.0-14","1.7.4.1","2.1.5","4.2.3","4.2.3","1.7.12","1.5.0","3.2.1","1.3.0","1.2.0","2.0.0","0.2.0","4.2.3","0.4.0","0.8-2","1.2.3","4.2.3","0.6.2","2.5.0","0.39","1.8-4","2.3.7"]}]}]}
</script>
<!--/html_preserve-->
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
